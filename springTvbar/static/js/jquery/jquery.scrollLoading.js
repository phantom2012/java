(function(a){a.fn.scrollLoading=function(b){var c={attr:"data-url",container:a(window),callback:a.noop};var d=a.extend({},c,b||{});d.cache=[];a(this).each(function(){var h=this.nodeName.toLowerCase(),g=a(this).attr(d.attr);if(g){var i={obj:a(this),tag:h,url:g};d.cache.push(i)}});var f=function(g){if(a.isFunction(d.callback)){d.callback.call(g.get(0))}};var e=function(){if(d.cache.length==0){return}var g=d.container.height();if(d.container[0].constructor&&d.container[0].constructor.toString()=="[object Window]"){contop=d.container.scrollTop()}else{try{contop=d.container.offset().top}catch(j){contop=d.container.scrollTop()}}var i=false;a.each(d.cache,function(q,r){if(!r){return true}var s=r.obj,m=r.tag,n=r.url,p,l;if(n){p=s.offset().top-contop,p+s.height();if((p>=0&&p<g)||(l>0&&l<=g)){var k=null;if(n){if(m==="img"){k=function(){f(s.attr("src",n));s.removeAttr(d.attr)}}else{k=function(){s.load(n,{},function(){s.data("loadFinish",true);f(s)})}}}else{k=function(){f(s)}}setTimeout(k,1);if(!i){i=true}r.url=null}}});if(i){var h=function(){a.each(d.cache,function(k,l){if(!l){return true}var m=l.obj;if(m&&(!m.attr(d.attr)||m.data("loadFinish"))){l.obj=null;d.cache.splice(k,1)}})};setTimeout(h,1)}};e();d.container.bind("scroll",e);d.container.bind("resize",e)}})(jQuery);