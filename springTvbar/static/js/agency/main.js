if(typeof(window.console)=="undefined"){window.console={log:function(){}}}var allowAnimation=!$.browser.msie||parseInt($.browser.version)>9;var isIE7=$.browser.msie&&parseInt($.browser.version)==7;var isIE9=$.browser.msie&&parseInt($.browser.version)==9;var macSafari=false;if(/.+mac os((?!chrome).)+Safari.+/i.test(window.navigator.userAgent.toLowerCase())){macSafari=true}(function(){if(window.localStorage&&window.localStorage.getItem&&window.localStorage.getItem("showConsole")=="true"){window.myConsole=function(f){console.log(f)};console.log("控制台信息己开启")}else{window.myConsole=function(){}}var e={floatBox:null,eventBind:function(){var f=this;this.floatBox.find("#toTop").on("click",function(){window.scrollTo(0,0)});$(window).on("resize scroll",function(){var g=f.floatBox;if($(document).scrollTop()>=150){g.show()}else{g.hide()}});$(window).triggerHandler("scroll")},init:function(){if($("#rightFloat").size()){this.floatBox=$("#rightFloat");this.eventBind()}}};var c={floatBg:null,floatWarp:null,checkFloatDom:function(){if(!this.floatBg||!this.floatBg.size()){$("body").append('<div id="floatBg"></div>');this.floatBg=$("#floatBg")}if(!this.floatWarp||!this.floatWarp.size()){$("body").append('<div id="float-warp"></div>');this.floatWarp=$("#float-warp");this.floatWarp.append(['<div class="float-title">','<a href="javascript:void(0);" id="float-close-btn"></a>','<div class="float-title-content"><span id="float_title_text" class="float-title-text">TA的视频</span></div>',"</div>",this.initVideoDom("float")].join(""))}},initVideoDom:function(f){return['<div id="jp_container_'+f+'" class="jp-video">','<div class="jp-type-single">','<div id="jquery_jplayer_'+f+'" class="jp-jplayer"></div>','<div class="jp-gui">','<div class="jp-interface">','<div class="jp-progress">','<div class="jp-seek-bar">','<div class="jp-play-bar"></div>',"</div>","</div>",'<div class="jp-time">','<span class="jp-current-time"></span><span class="jp-duration"></span>',"</div>",'<div class="jp-controls-holder">','<ul class="jp-controls">','<li><a href="javascript:;" class="jp-play" tabindex="1" title="播放">play</a></li>','<li><a href="javascript:;" class="jp-pause" tabindex="1" title="暂停">pause</a></li>','<li><a href="javascript:;" class="jp-mute" tabindex="1" title="静音">mute</a></li>','<li><a href="javascript:;" class="jp-unmute" tabindex="1" title="取消静音">unmute</a></li>',"</ul>",'<div class="jp-volume-bar">','<div class="jp-volume-bar-value"></div>',"</div>",'<div class="jp-screen-bar">','<a href="javascript:;" class="jp-full-screen" title="全屏显示"></a>','<a href="javascript:;" class="jp-restore-screen" title="退出显示"></a>',"</div>","</div>","</div>","</div>","</div>","</div>"].join("")},showVideoFloat:function(f){var h=this;this.checkFloatDom();var g=$("#jquery_jplayer_float");if(g.size()&&g.data("ready")=="1"){g.jPlayer("setMedia",{m4v:f}).jPlayer("play")}else{g.jPlayer({ready:function(){g.data("ready",1);$(this).jPlayer("setMedia",{m4v:f}).jPlayer("play")},play:function(){},click:function(i){if(i.jPlayer.status.paused==true){$(this).jPlayer("play")}else{$(this).jPlayer("pause")}},swfPath:"http://res1.idol.yystatic.com/swf/Jplayer.swf",supplied:"m4v",size:{width:"800px",height:"450px",cssClass:"jp-video-450p"},cssSelectorAncestor:"#jp_container_float",fullBtn:true,smoothPlayBar:true,keyEnabled:true,solution:"flash,html"})}this.floatBg.show();this.floatWarp.fadeIn(500)},closeVideoFloat:function(){var f=this;this.floatWarp.fadeOut(500,function(){f.floatBg.hide()})},eventBind:function(){var f=this;if($("#top-video-play").size()){$("#top-video-play").on("click",function(i){hiido_statPP(anchorUid,4,"pc");var k=$(this).attr("videoId")||"";if(!k){try{homeInit.addVideoPlayCount(k)}catch(j){}}var h=$(this).attr("_url")||"";if(!h){return}var g=$("#jquery_jplayer_top");if(!g.size()){$("#top_video_warp").html(f.initVideoDom("top"));g=$("#jquery_jplayer_top")}$("#topBanner").addClass("play");if(g.size()&&g.data("ready")=="1"){g.jPlayer("setMedia",{m4v:h}).jPlayer("play")}else{g.jPlayer({ready:function(){g.data("ready",1);$(this).jPlayer("setMedia",{m4v:h}).addClass("jp-video-ended").jPlayer("play")},pause:function(){$("#jp_container_top").addClass("jp-video-ended")},play:function(){$("#jp_container_top").removeClass("jp-video-ended")},click:function(l){if(l.jPlayer.status.paused==true){$(this).jPlayer("play")}else{$(this).jPlayer("pause")}},resize:function(o){var n=$("#topBanner");var m="show";var l=n.data("zIndex");if($("#jp_container_top").hasClass("jp-video-full")){n.data("zIndex",n.css("z-index"));l=100;m="hide"}if(l){n.css({"z-index":l})}if(isIE7){n.find(".share-box")[m]()}},swfPath:"http://res1.idol.yystatic.com/swf/Jplayer.swf",supplied:"m4v",size:{width:"100%",height:"100%",cssClass:""},cssSelectorAncestor:"#jp_container_top",fullBtn:true,smoothPlayBar:true,keyEnabled:true,solution:"flash,html"})}$("#jp_container_top").find(".jp-restore-screen").on("click",function(){window.location="#topBanner"})});$("#top_video_close").on("click",function(g){$("#jquery_jplayer_top").jPlayer("stop");$("#topBanner").removeClass("play")})}$("#show_all_video").on("click",function(i){var k=$(this);var h=k.siblings(".video-list");var g,j;if(isIE7){if(k.data("showall")!=1){$("#video_list li").show()}else{$("#video_list li").each(function(l,m){if(l){$(this).hide()}})}}else{if(k.data("showall")!=1){g=$("#video_list").height()+50}else{g=230}h.animate({height:g},1000)}if(k.data("showall")!=1){j="收起列表";k.data("showall",1)}else{j="更多视频";k.data("showall",0)}k.text(j).toggleClass("showall")});$("a.video-btn").on("click",function(g){g.preventDefault();g.stopPropagation();var h=$(this).attr("href")||"";if(h){$("#top_video_close").trigger("click");f.showVideoFloat(h)}});$(document).delegate("#float-close-btn","click",function(){$("#jquery_jplayer_float").jPlayer("stop");f.closeVideoFloat()})},init:function(){var f=$("#top-video-play").attr("_url")||"";if(!f){$("#top-video-play").hide()}this.eventBind();if(isIE7){$("#video_list li").each(function(g,h){if(g){console.log(g);$(this).hide()}});$(".video-list").css({height:"auto"})}}};var d={musicBtns:null,musicPlayer:null,checkDom:function(){if(!this.musicPlayer){$("body").append('<div id="music-player" style="width:0;height:0px;"></div>');this.musicPlayer=$("#music-player")}},play:function(f){var g=this;if(this.musicPlayer.data("has")==1){this.musicPlayer.jPlayer("stop").jPlayer("setMedia",{mp3:f}).jPlayer("play")}else{this.musicPlayer.jPlayer({ready:function(){$(this).jPlayer("setMedia",{mp3:f}).jPlayer("play")},ended:function(){g.musicBtns.removeClass("play")},swfPath:"http://res1.idol.yystatic.com/swf/Jplayer.swf",supplied:"mp3",solution:"flash,html"}).data("has",1)}},stop:function(){if(this.musicPlayer){this.musicPlayer.jPlayer("stop")}},eventBind:function(){var f=this;this.musicBtns.on("click",function(){var g=$(this);f.stop();if(g.hasClass("play")){g.removeClass("play")}else{f.musicBtns.removeClass("play");var h=g.attr("_url")||"";if(!h){return}g.addClass("play");f.checkDom();f.play(h)}})},init:function(){this.musicBtns=$("a.music-btn").filter("[_url]");if(this.musicBtns.size()){$("a.music-btn").not("[_url]").hide();this.eventBind()}}};var a={param:null,setWidth:function(){var g=this.param.votes/this.param.max*100;var f=$(".line-box");setTimeout(function(){$("#line_sub").css({width:g+"%"});if(g==100){f.addClass("p-3")}else{if(g>=50){f.addClass("p-2")}else{if(g>=5.4){f.addClass("p-1")}}}},allowAnimation?500:0)},add:function(){var f=$(".line-box");f.addClass("add-vote");setTimeout(function(){f.removeClass("add-vote")},1000)},init:function(f){if(!f||!f.max||!f.votes){return}f.max=parseInt(f.max);f.votes=parseInt(f.votes)||0;f.votes=f.max<f.votes?f.max:f.votes;if(!f.max||f.max<0){return}this.param=$.extend({},this.param,f);this.setWidth()}};var b={floatBg:null,checkFloatBgDom:function(){if(!this.floatBg||!this.floatBg.size()){$("body").append('<div id="floatBg"></div>');this.floatBg=$("#floatBg")}},showShareHint:function(){if($("#shart_hint").size()){this.floatBg.show();$("#shart_hint").show()}else{this.checkFloatBgDom();this.floatBg.show();$("body").append(['<div id="shart_hint">','<a id="shart_close" class="close" href="javascript:void(0);"></a>','<div class="hint-txt">点击右上角分享可获得更多票</div>',"</div>"].join(""))}},hideShareHint:function(){this.floatBg.hide();$("#shart_hint").hide()},eventBind:function(){var f=this;$(document).delegate("#shart_close","click",function(){f.hideShareHint()});$(".share-weibo").on("click",function(){hiido_statPP(anchorUid,2);var g="agency_yy_com_share_hint";var h=getLoginUid();if(h){g+="_"+h}if(!$.cookie(g)){$.cookie(g,"1",{expires:30,path:"/",domain:"idol.yy.com"})}var h=getLoginUid();$.ajax({url:"/agency/getWeiboShareUrl.action",data:{projectId:projectId,uid:(isLogin()&&h)?h:""},dataType:"json",success:function(i){if(!i||!i.data){return}voteCon.initUserVoteInfo();window.open("http://service.weibo.com/share/share.php?title="+encodeURIComponent(document.title)+"&url="+encodeURIComponent(i.data)+"&pic="+encodeURIComponent($("#topBanner").attr("_bgimg"))+"&source=bookmark&appkey=2992571369&ralateUid=")},error:function(){window.open("http://service.weibo.com/share/share.php?title="+encodeURIComponent(document.title)+"&url="+encodeURIComponent(window.location)+"&pic="+encodeURIComponent($("#topBanner").attr("_bgimg"))+"&source=bookmark&appkey=2992571369&ralateUid=")},exception:function(){window.open("http://service.weibo.com/share/share.php?title="+encodeURIComponent(document.title)+"&url="+encodeURIComponent(window.location)+"&pic="+encodeURIComponent($("#topBanner").attr("_bgimg"))+"&source=bookmark&appkey=2992571369&ralateUid=")}})})},init:function(){this.eventBind()}};window.vote=a;window.share=b;window.video=c;window.music=d;$(document).ready(function(){$("body").attr("allowAnimation",allowAnimation?1:0);loginCfg.loginCallBack=loginCfg.logoutCallBack=function(){location.reload()};$("#rule_btn").on("click",function(){$("#rule_content").toggle()});$("#rule_colse").on("click",function(){$("#rule_content").hide()});e.init();b.init()})})();