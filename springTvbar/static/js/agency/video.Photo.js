if(typeof(window.console)=="undefined"){window.console={log:function(){}}}var allowAnimation=!$.browser.msie||parseInt($.browser.version)>9;var isIe6=$.browser.msie==true&&parseInt($.browser.version)==6;var isIE7=$.browser.msie&&parseInt($.browser.version)==7;var isIE9=$.browser.msie&&parseInt($.browser.version)==9;var macSafari=false;if(/.+mac os((?!chrome).)+Safari.+/i.test(window.navigator.userAgent.toLowerCase())){macSafari=true}function videoPlayer(a){var b={floatwin:false,checkDom:function(){var d=$("#floatBg");var e=$("#float-warp");var c=$("#jvideoBox");if(!d.size()){$("body").append('<div id="floatBg"></div>');d=$("#floatBg")}if(!c.size()){$("body").append(this.createVideoPlayer());c=$("#jvideoBox");e=$("#float-warp")}if(isIe6){c.css({top:$(document).scrollTop()+$(window).height()/2});d.css({height:$(document).height()})}return{floatBg:d,floatWarp:e,videoBox:c}},closeFloat:function(){$("#jvideoBox").fadeOut(500,function(){if($("#jquery_jplayer_1").size()){$("#jquery_jplayer_1").jPlayer("stop")}if($("#photoshowbox").size()){photo.colseCallBack()}$("#floatBg").hide()})},createVideoPlayer:function(){return['<div class="jvideo-box" id="jvideoBox">','<div id="float-warp"></div>','<div class="right-box">','<div class="type"></div>','<div class="title"></div>','<div class="time"></div>','<div class="info"></div>','<a href="#" class="close"></a>',"</div>","</div>"].join("")},reSetDom:function(d){var c=$("#jvideoBox");c.find(".type").html(d.type);c.find(".title").html(d.title);c.find(".time").html(d.time);c.find(".info").html(d.info);c.find(".link").attr("href",d.link)},createVCRPlayer:function(h){this.floatwin=this.checkDom();var d=this.floatwin.floatBg;var g=this.floatwin.floatWarp;var c=this.floatwin.videoBox;var f=false;var i="m4v";this.reSetDom(h);var e=[];e=[this.createShowBox()].join("");g.html(e);if(h.url.indexOf(".mp3")!=-1){f=true;i="mp3"}$("#jquery_jplayer_1").jPlayer({ready:function(){if(!f){$(this).jPlayer("setMedia",{m4v:h.url}).jPlayer("play")}else{$(this).jPlayer("setMedia",{mp3:h.url,poster:h.poster}).jPlayer("play")}},click:function(j){if(j.jPlayer.status.paused==true){$(this).jPlayer("play")}else{$(this).jPlayer("pause")}},swfPath:"http://res0.1931.yystatic.com/dream/swf/Jplayer.swf",supplied:i,size:{width:"520px",height:"363px",cssClass:"jp-video-520p"},solution:"flash,html",fullBtn:true,smoothPlayBar:true,keyEnabled:true});d.show();c.fadeIn(500)},createShowBox:function(){return['<div id="jp_container_1" class="jp-video">',' <div class="jp-type-single">','<div id="jquery_jplayer_1" class="jp-jplayer"></div>','<div class="jp-gui">','<div class="jp-video-play">',' <a href="javascript:;" class="jp-video-play-icon" tabindex="1">play</a>',"</div>",'<div class="jp-interface">','<div class="jp-progress">',' <div class="jp-seek-bar">','<div class="jp-play-bar"></div>',"</div>","</div>",'<div class="jp-time">','<span class="jp-current-time"></span><span class="jp-duration"></span>',"</div>",'<div class="jp-controls-holder">','<ul class="jp-controls">','<li><a href="javascript:;" class="jp-play" tabindex="1" title="播放">play</a></li>','<li><a href="javascript:;" class="jp-pause" tabindex="1" title="暂停">pause</a></li>','<li><a href="javascript:;" class="jp-mute" tabindex="1" title="静音">mute</a></li>','<li><a href="javascript:;" class="jp-unmute" tabindex="1" title="取消静音">unmute</a></li>',"</ul>",'<div class="jp-volume-bar">','<div class="jp-volume-bar-value"></div>',"</div>",'<div class="jp-screen-bar">','<a href="javascript:;" class="jp-full-screen" title="全屏显示"></a>','<a href="javascript:;" class=" jp-restore-screen" title="退出显示"></a>',"</div>","</div>","</div>","</div>","</div>","</div>"].join("")},getParam:function(c){return{link:c.attr("_link")||"",type:c.attr("_type")||"",title:c.attr("_title")||"",time:c.attr("_time")||"",info:c.attr("_info")||"",url:c.attr("_url")||"",poster:c.find("img").attr("src")||""}},eventBind:function(){var c=this;$(document).delegate(a,"click",function(){var d=$(this);var e=c.getParam(d);c.createVCRPlayer(e)});$(document).delegate("#jvideoBox .close","click",function(){c.closeFloat()})},init:function(){this.eventBind()}};b.init();return b}function photoPlayer(a,c){var b={photolist:[],photoObj:{},photoindex:0,floatwin:false,checkDom:function(){var d=$("#floatBg");var f=$("#photo-warp");var e=$("#jphotoBox");if(!d.size()){$("body").append('<div id="floatBg"></div>');d=$("#floatBg")}if(!e.size()){$("body").append(this.createPhotoPlayer());e=$("#jphotoBox");f=$("#photo-warp")}if(isIe6){e.css({top:$(document).scrollTop()+$(window).height()/2});d.css({height:$(document).height()})}return{floatBg:d,photoWarp:f,photoBox:e}},closeFloat:function(){$("#jphotoBox").fadeOut(500,function(){$("#floatBg").hide()})},createPhotoPlayer:function(){return['<div class="jphoto-box" id="jphotoBox">','<div id="photo-warp"></div>','<div class="right-box">','<div class="type"></div>','<div class="title"></div>','<div class="time"></div>','<div class="pageindex"></div>','<div class="info"></div>','<div class="imglist"></div>','<a href="#" class="close"></a>',"</div>","</div>"].join("")},reSetDom:function(e){var d=$("#jphotoBox");d.find(".type").html(e.type);d.find(".title").html(e.title);d.find(".time").html(e.time);d.find(".link").attr("href",e.link);d.find(".pageindex").html("<span>1</span>/"+e.photos.length)},createPCRPlayer:function(h){this.floatwin=this.checkDom();var d=this.floatwin.floatBg;var g=this.floatwin.photoWarp;var f=this.floatwin.photoBox;this.photolist=h.photos;this.reSetDom(h);var e=[];e=[this.createPhotoList(this.photolist)].join("");f.find(".imglist").html(e);this.showChild(0);d.show();f.fadeIn(500)},showChild:function(e){$("#jphotoBox").find(".imglist li").removeClass("on");$("#jphotoBox").find(".imglist li").eq(e).addClass("on");$("#jphotoBox").find(".info").html(this.photolist[e].info);$("#jphotoBox").find(".pageindex").html("<span>"+(1+e)+"</span>/"+this.photolist.length);$("#photo-warp").html('<img width="100%"  style="visibility: hidden;"/>');var f=$("#photo-warp").find("img");var d;$(f).one("load",function(){if($(f).height()>600){d=600/$(f).height();$(f).css("height","600px");$(f).css("width",f.width()*d+"px");$(f).css("margin-top","0px");$(f).css("margin-left",278-$(f).width()/2+"px")}else{$(f).css("margin-left","0px");$(f).css("margin-top",300-$(f).height()/2+"px")}$(f).css("visibility","visible")});$(f).attr("src",this.photolist[e].img)},createPhotoList:function(f){var d="<ul>";for(var e=0;e<f.length;e++){d+="<li><img src="+f[e].img+" _url="+f[e].img+" _info="+f[e].info+' class="item"/></li>'}d+="</ul>";return d},getParam:function(d){return{id:d.attr("_id")||""}},eventBind:function(e){var d=this;d.photoObj=e;$(document).delegate(a,"click",function(){var f=$(this);var g=d.getParam(f);if(!d.photoObj[g.id]){return}console.log(d.photoObj[g.id].photos);d.createPCRPlayer(d.photoObj[g.id])});$(document).delegate("#jphotoBox .close","click",function(){d.closeFloat()});$(document).delegate("#jphotoBox li .item","click",function(){d.showChild($(this).parent().index())})},init:function(d){this.eventBind(d)}};b.init(c);return b};