(function (a) {
    a.uiwidget = a.uiwidget || {};
    a.uiwidget.Popup = function (c, b) {
        a.extend(this, b);
        this.target = c;
        this.init()
    };
    a.uiwidget.Popup.prototype = {dragEnable: false, showMask: true, display: false, isCenter: true, init: function () {
        var b = this;
        if (b.dragEnable && a.uiwidget.Drag) {
            b.target.drag()
        }
        b.target.css({position: "absolute", zIndex: 20002});
        a(window).bind("resize", function () {
            b.centerLayout()
        });
        a(window).bind("scroll", function () {
            b.centerLayout()
        })
    }, show: function () {
        var b = this;
        b.target.show();
        b.centerLayout()
    }, hide: function () {
        var b = this;
        if (b.showMask) {
            b.getMaskEl().hide()
        }
        b.target.hide()
    }, centerLayout: function () {
        var c = this;
        if (c.target.css("display") == "none") {
            return
        }
        var g = (document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft);
        var f = (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop);
        if (c.isCenter) {
            c.target.css({left: (a(window).width() - c.target.width()) / 2 + g, top: (a(window).height() - c.target.height()) / 2 + f})
        } else {
            c.target.css({left: (a(window).width() - c.target.width()) / 2 + g, top: 0 + f})
        }
        var e = c.getMaskEl();
        var b = 0;
        if (document.documentElement.clientHeight > document.body.clientHeight) {
            b = document.documentElement.clientHeight
        } else {
            b = document.body.clientHeight
        }
        var d = document.body.scrollWidth;
        if (document.body.scrollWidth <= document.body.clientWidth) {
            d = document.body.clientWidth
        }
        if (a.browser.mozilla) {
            b = a(document).height();
            d = a(document).width()
        }
        e.width(d).height(b)
    }, renderMask: function () {
        var b = a('<div id="popupMask' + this.id + '" class="popup-mask"><iframe frameborder="0" style="width:100%;height:100%;background-color:#000;filter: alpha(opacity=0);-moz-opacity: 0;opacity: 0;"></iframe></div>');
        a(document.body).append(b);
        return b
    }, getMaskEl: function () {
        return this.maskEl || (this.maskEl = this.renderMask())
    }};
    a.fn.popup = function (b) {
        return new a.uiwidget.Popup(this, b)
    };
    a.uiwidget.popupShow = function (f) {
        var i = a("#" + f.id);
        var b = a.uiwidget.popup = a.uiwidget.popup || {};
        if (!a(b).attr(f.id)) {
            (a(b).attr(f.id, new a.uiwidget.Popup(i, f)))
        }
        var e = a(b).attr(f.id);
        var d = document.body.clientHeight;
        var g = document.documentElement.clientHeight;
        var j = (g <= d && g != 0) ? true : false;
        var h = j ? document.documentElement : document.body;
        var c = true;
        if (typeof(f.isScroll) == "boolean") {
            c = f.isScroll;
            e.isCenter = f.isScroll
        }
        if (!c) {
            h.style.overflow = "hidden"
        }
        e.show();
        return e
    };
    a.uiwidget.popupHide = function (c) {
        var g = a(a.uiwidget.popup).attr(c.id);
        if (g) {
            if (!g.isCenter) {
                var d = document.body.clientHeight;
                var f = document.documentElement.clientHeight;
                var b = (f <= d && f != 0) ? true : false;
                var e = b ? document.documentElement : document.body;
                e.style.overflowY = "auto"
            }
            g.hide();
            a(a.uiwidget.popup).attr(c.id, null);
            a("#popupMask" + c.id).remove()
        }
    };
    a.uiwidget.showMsgbox = function (g, e, h, c) {
        var f = (document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft);
        var d = (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop);
        var b = document.createElement("div");
        b.className = "popup-msgbox";
        if (c == 0) {
            b.innerHTML = '<span class="fail">' + g + "</span>"
        } else {
            b.innerHTML = '<span class="success">' + g + "</span>"
        }
        document.body.appendChild(b);
        b.style.position = "absolute";
        b.style.zIndex = 20005;
        b.style.display = "block";
        b.style.left = f + ((a(window).width() - a(b).width()) / 2) + "px";
        b.style.top = d + ((a(window).height() - a(b).width()) / 2) + "px";
        window.setTimeout(function () {
            document.body.removeChild(b);
            if (h) {
                h()
            }
        }, e)
    }
})(jQuery);