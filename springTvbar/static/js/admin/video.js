var singers=getMap();function selectAnchor(e,c){$(e).remove();var f=$(e).attr("data-id");var b=$(e).text();var a=c==0?1:0;var d='<button class="girl-cell" data-id="'+f+'" onclick="selectAnchor(this,'+a+')">'+b+"</button>";if(c==0){singers.remove(f);$("#member_new").append(d)}else{singers.put(f,f);$("#member_old").append(d)}}function videoDel(a){$.ajax({type:"POST",data:{vid:a},url:"/admin/videoDel.action",dataType:"json",success:function(b){if(b.code!="0"){$("#li_"+a).remove();showMessage("删除成功!")}}})}function videoRead(a,b){$.ajax({type:"get",url:"/admin/videoRead.action",data:"vid="+b+"&uid="+a,async:false,dataType:"json",success:function(f){video=f.data;if(video){$("#thumb").attr("src",getRandomYYStaticPath(video.thumb));if(video.thumb2&&video.thumb2!=""){$("#thumb2").attr("src",getRandomYYStaticPath(video.thumb2));$("#div_thumb2").show()}if(video.thumb3&&video.thumb3!=""){$("#thumb3").attr("src",getRandomYYStaticPath(video.thumb3));$("#div_thumb3").show()}$("#duration").val(video.info.duration);$("#name").val(video.name);$("#description").val(video.description);$("#pc_video_url").text(video.url);$("#mobile_video_url").text(video.mobile_url);$("#photoFile").val("");$("#photo2File").val("");$("#photo3File").val("");var c=video.members;var d="";for(var g in c){singers.put(g,g);d+='<button class="girl-cell" onclick="selectAnchor(this,0)" data-id="'+g+'">'+c[g]+"</button>"}$("#member_old").html(d);d="";var e=video.others;for(var g in e){d+='<button class="girl-cell" onclick="selectAnchor(this,1)" data-id="'+g+'">'+e[g]+"</button>"}$("#member_new").html(d);$("#vid").val(b);$("#videoEditModal").modal()}}})}function videoEdit(){var a={url:"/admin/videoEdit.action",async:true,dataType:"json",type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(b){if(b.code!="0"){showMessage("修改成功!");$("#videoEditModal").modal("hide")}},error:function(b){showMessage("系统异常")}};$("#videoEditForm").ajaxSubmit(a)}function videoFormValid(){var b=$("#photoFile").val();var c=$("#pcurl").val();var f=$("#mobileurl").val();var a=$("#name").val();var e=$("#duration").val();var d=$("#description").val();if(!c||!f||!b||!a||!e||!d){showMessage("带*号为必填项请选择!");return false}return true}function videoAdd(){var a={url:"/admin/videoUpAdd.action",async:true,dataType:"json",type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(b){hideLoading();if(b.result!="0"){showMessage("添加成功!");location.href="/admin/videoIndex.action?t="+new Date().getTime()}else{showMessage(b.data)}},error:function(b){showMessage("系统异常")}};if(videoFormValid()){showLoading();$("#videoForm").ajaxSubmit(a)}}function videoUpload(c,b){var a={url:"/admin/uploadVideo.action",async:true,dataType:"json",type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(d){if(d.result=="0"){b(d)}else{showMessage(d.msg)}},error:function(d){showMessage("系统异常")}};$(c).ajaxSubmit(a)}function playvideo(d){var c=checkDom();var a=c.floatBg;var e=c.floatWarp;if($("#jquery_jplayer_1").size()){$("#jquery_jplayer_1").jPlayer("setMedia",{m4v:d}).jPlayer("play")}else{var b=[createShowTitle(),createShowBox(),createShowBottom()].join("");e.html(b);$("#jquery_jplayer_1").jPlayer({ready:function(){$(this).jPlayer("setMedia",{m4v:d}).jPlayer("play")},swfPath:"http://res.tvbar.yystatic.com/tvbar/swf/Jplayer.swf",supplied:"m4v",size:{width:"800px",height:"450px",cssClass:"jp-video-450p"},smoothPlayBar:true,keyEnabled:true})}a.show();e.fadeIn(500);$("#float-close-btn").click(function(){closeFloat()})}function createShowBox(){return['<div id="jp_container_1" class="jp-video">',' <div class="jp-type-single">','<div id="jquery_jplayer_1" class="jp-jplayer"></div>','<div class="jp-gui">','<div class="jp-video-play">',' <a href="javascript:;" class="jp-video-play-icon" tabindex="1">play</a>',"</div>",'<div class="jp-interface">','<div class="jp-progress">',' <div class="jp-seek-bar">','<div class="jp-play-bar"></div>',"</div>","</div>",'<div class="jp-time">','<span class="jp-current-time"></span><span class="jp-duration"></span>',"</div>",'<div class="jp-controls-holder">','<ul class="jp-controls">','<li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>','<li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>','<li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>','<li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>',"</ul>",'<div class="jp-volume-bar">','<div class="jp-volume-bar-value"></div>',"</div>","</div>","</div>","</div>","</div>","</div>"].join("")}function createShowTitle(){return['<div class="float-title">','<a href="javascript:void(0);" id="float-close-btn"></a>','<div class="float-title-content"><span class="float-title-type">视频测验：</span><span class="float-title-text">视频测验</span><span class="float-title-time"></span></div>',"</div>"].join("")}function createShowBottom(){return['<div class="float-bottom">','<a class="btn-zan" _type="1" _id="{id}" _zan="{zan}" href="javascript:void(0);" >1</a>','<div class="share-view">',"<dl>","<dt>分享给好友</dt>",'<dd><a class="share-btn share-weibo" title="1931女子偶像组合 {type}" href="javascript:void(0);"></a></dd>','<dd><a class="share-btn share-qzone" title="1931女子偶像组合 {type}" href="javascript:void(0);"></a></dd>',"</dl>","</div>","</div>"].join("")}function checkDom(){var a=$("#floatBg");var b=$("#float-warp");if(!a.size()){$("body").append('<div id="floatBg"></div>');a=$("#floatBg")}if(!b.size()){$("body").append('<div id="float-warp"></div>');b=$("#float-warp")}return{floatBg:a,floatWarp:b}}function closeFloat(){$("#float-warp").fadeOut(500,function(){if($("#jquery_jplayer_1").size()){$("#jquery_jplayer_1").jPlayer("stop")}if($("#photoshowbox").size()){photo.colseCallBack()}$("#floatBg").hide()})};