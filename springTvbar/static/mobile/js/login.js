!function(){var a={parse:function(d){var c=document.createElement("a"),b={};return c.href=d,b={href:d,origin:void 0,protocol:c.protocol.replace(":",""),hostname:c.hostname,host:c.hostname,port:c.port,search:c.search,pathname:(c.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:c.hash,pathname:c.pathname.replace(/^([^\/])/,"/$1"),params:function(){for(var i,j={},f=c.search.replace(/^\?/,"").split("&"),k=f.length,l=0;k>l;l++){if(f[l]){i=f[l].split("=");try{j[i[0]]=i[1]&&decodeURIComponent(i[1])||j[i[0]]||""}catch(g){}}}return k>0?j:{}}()}},query:function(c){var b=this.parse(location.href).params[c];return !b&&window.g_paras&&(b=g_paras[c]||""),b}};window.NativeBridge={callbacksCount:1,callbacks:{},resultForCallback:function(c,b){try{var f=NativeBridge.callbacks[c];if(!f){return}f.apply(null,b)}catch(d){alert(d)}},call:function(f,b,g){var e=g&&"function"==typeof g,d=e?NativeBridge.callbacksCount++:0;e&&(NativeBridge.callbacks[d]=g);var c=document.createElement("IFRAME");c.setAttribute("src","js-frame:"+f+":"+d+":"+encodeURIComponent(JSON.stringify(b))),c.setAttribute("height","1px"),c.setAttribute("width","1px"),document.documentElement.appendChild(c),c.parentNode.removeChild(c),c=null}},window.bbsLogin={init:function(){bbsLogin._checkCookie();bbsLogin.doLogin()},writeCookie:function(b,d,c,e){document.cookie=b+"="+d+";domain="+c+";path="+e},_checkCookie:function(){document.cookie||(window.navigator&&window.navigator.cookieEnabled)||alert("请设置您的浏览器支持cookie以便正常访问!")},ajaxOpenWithSaveToken:function(d,b,c){UDB.sdk.MWeb.ajax({url:d,args:{callbackURL:b,opt:c},onComplete:function(e){if("1"==e.success){bbsLogin.writeCookie("udboauthtmptoken",e.ttoken,document.domain,"/");bbsLogin.writeCookie("udboauthtmptokensec",e.ttokensec,document.domain,"/");UDB.sdk.MWeb.embedOpenLgn(JSON.stringify(e))}else{alert(e.errMsg)}},method:"POST",responseType:"json",isEncode:true})},doLogin:function(){bbsLogin.ajaxOpenWithSaveToken(SITEURL+"agency/mobile/getSdkAuth.action",SITEURL+"agency/mobile/udbCallback.action","")},storageBindInfo:function(b){window.localStorage.setItem("js-bind-info",JSON.stringify(b))}}}();