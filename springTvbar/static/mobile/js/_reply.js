(function(){var a={eventBind:function(){var e=$("#topic-desc-con"),c=$("#replyContent"),d=$("#viewpointContent"),g=$("#reply-head"),f=$("#viewpoint-head");var i=$("#reply-head");var h=$("#topic-reply");i.on("click",".cancel-btn",function(){topicTitle=$.trim(h.find(".viewpoint").val());topicDesc=$.trim(h.find(".topic-desc-area").val());if(topicTitle!=""||topicDesc!=""){window.Ui.newConfirm.init({title:"确定放弃发布回复？",content:"已完成了部分编辑，点击<br />确定将放弃回复，返回到原话题。",callBack:{cancel:function(){},define:function(){history.back()}}})}});i.on("click",".right-btn",function(){topicTitle=$.trim(h.find(".viewpoint").val());topicDesc=$.trim(h.find(".topic-desc-area").val());if(topicTitle==""||topicDesc==""){window.Ui.newAlert.init({content:"话题回复<br />需先填写观点",callBack:function(){}})}});$("#viewpointIpt").on("focus",function(){c.css("display","none");d.css("display","block");g.css("display","none");f.css("display","block")});$("#add-btn").on("click",function(){var j=['<div class="item-con upload">',' <textarea  class="topic-desc-area" placeholder="输入简短的话题描述" maxlength="70"></textarea>',' <div class="upload-img">','  <div class="img"></div>','  <form><input type="file" name="pic" class="upload-btn" accept="image/*"></form>'," </div>",' <div class="delete-btn"><div class="delete"><span></span></div></div>',"</div>"].join("");$("#topic-desc-con").append(j)});e.on("click",".delete-btn",function(){$(this).parents(".item-con").remove()});e.on("click",".delete-img",function(){var j=$(this);var k=j.parents(".item-con");uploadBtn=k.find(".upload-btn");uploadBtn.parents("form")[0].reset();j.css("display","none");k.height(66)});e.on("change",".upload-btn",function(){var j=$(this);var k=j.parents(".item-con");k.height(90);k.find(".delete-img").css("display","block")});var b=$("#viewpointIpt2");$("#viewpoint-list").on("click","li",function(){var k=$(this);k.siblings("li").removeClass("on");k.addClass("on");var j=k.find("span").eq(2).text();b.val(j)});b.on("input",function(){var j=$(this).val();var l=$("#viewpoint-list li");var m;for(var k=0;k<l.length;k++){m=$(l[k]);if(j==m.find("span").eq(2).text()){m.addClass("on")}else{m.removeClass("on")}}});$("#goback").click(function(){d.css("display","none");c.css("display","block");f.css("display","none");g.css("display","block")});$("#vpSubmit").click(function(){var j=b.val();$("#viewpointIpt").val(j);d.css("display","none");c.css("display","block");f.css("display","none");g.css("display","block")})},init:function(){this.eventBind()}};$(function(){a.init()})})();