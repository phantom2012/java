define("templates/1931edition2/playvideo",["yymhandlebars"],function(a){this["Handlebars"]=this["Handlebars"]||{};this["Handlebars"]["templates"]=this["Handlebars"]["templates"]||{};this["Handlebars"]["templates"]["playvideo"]=a.template(function(f,l,e,k,j){this.compilerInfo=[4,">= 1.0.0"];e=this.merge(e,f.helpers);j=j||{};var h="",c,g="function",i=this.escapeExpression,m=this;function d(s,r){var o="",p,q;o+='\r\n<video id="';if(q=e.id){p=q.call(s,{hash:{},data:r})}else{q=(s&&s.id);p=typeof q===g?q.call(s,{hash:{},data:r}):q}o+=i(p)+'" class="hidden" type="video/mp4" style="width:1px;height:1px;"></video>\r\n';return o}function b(s,r){var o="",p,q;o+="\r\n";p=e["if"].call(s,(s&&s.appendCss),{hash:{},inverse:m.noop,fn:m.program(4,n,r),data:r});if(p||p===0){o+=p}o+='\r\n<section id="';if(q=e.id){p=q.call(s,{hash:{},data:r})}else{q=(s&&s.id);p=typeof q===g?q.call(s,{hash:{},data:r}):q}o+=i(p)+'section" class="video-section hidden">\r\n    <a class="close-btn" href="javascript:void(0);"></a>\r\n    <video id="';if(q=e.id){p=q.call(s,{hash:{},data:r})}else{q=(s&&s.id);p=typeof q===g?q.call(s,{hash:{},data:r}):q}o+=i(p)+'" class="video-play" src="" type="video/mp4"></video>\r\n    <div class="video-desc"></div>\r\n</section>\r\n';return o}function n(p,o){return"\r\n<style>\r\n.video-play{\r\n    width: 100%;\r\n    margin: auto;\r\n}\r\n.video-desc{\r\n    color: #ffffff;\r\n    font-size: 14px;\r\n    line-height: 16px;\r\n    padding: 8px;\r\n}\r\n.video-section{\r\n    position: relative;\r\n    -webkit-box-orient: vertical;\r\n    -webkit-box-pack: center;\r\n    display: -webkit-box;\r\n    background-color: #000000;\r\n}\r\n.close-btn {\r\n    position: absolute;\r\n    top: 36px;\r\n    right: 8px;\r\n    display: inline-block;\r\n    height: 40px;\r\n    width: 40px;\r\n    background: url('http://res.1931.yystatic.com/dream/mobile/images/1931edition2/close.png?_tc=44d47b1a') center no-repeat;\r\n    background-size: 100% auto;\r\n}\r\n.close-btn:active{\r\n        background-image: url(http://res.1931.yystatic.com/dream/mobile/images/1931edition2/close_active.png);\r\n    }\r\n</style>\r\n"}c=e["if"].call(l,(l&&l.isIOS),{hash:{},inverse:m.noop,fn:m.program(1,d,j),data:j});if(c||c===0){h+=c}h+="\r\n\r\n";c=e["if"].call(l,(l&&l.isAndroid),{hash:{},inverse:m.noop,fn:m.program(3,b,j),data:j});if(c||c===0){h+=c}h+="\r\n\r\n\r\n\r\n";return h});return this["Handlebars"]["templates"]});var statisticEvent=function(b,h,f,d,g){var a={act:"webevent",eventid:b,value:1,eventype:1,uid:0,bak1:h?h:0,bak2:f?f:0,bak3:d?d:0};try{appHiido.stat(a)}catch(c){}if(typeof g=="function"){g(a)}};var queryInfo={from:/iPhone|iPod|iPad/.test(navigator.userAgent)?"ios":"android",fromid:/iPhone|iPod|iPad/.test(navigator.userAgent)?1:0};if(queryInfo.from=="ios"){$("#videoBox").html('<video src="" id="livePlayer" class="video-play" webkit-playsinline width="100%" style="display:none;"></video>')}requirejs(["1931edition2/playvideo"],function(a){var d=0;var e=function(){$(".video-box .play-btn").click(function(h){d=0;var i=$(this);hiido_statPP(anchorUid,4,"mobile");document.getElementById("audio").pause();$("#myVideoIdsection .video-loading").show();$("#myVideoIdsection .play-btn").hide();f($(h.currentTarget).attr("videoId"));var g=$(this).parent().next().find("span");g.html(parseInt(g.html())+1)})};function c(h){var g=$(window).height();a.createVideo("myVideoId",h,"#contentTag",function(){});$("#myVideoIdsection").height(g);$("#myVideoIdsection .close-btn").css("z-index",9999);$("#myVideoId").attr("poster","")}function f(g){var h=this;$.ajax({url:"/agency/admin/addVideoPlayCount.action",data:{uid:anchorUid,projectId:projectId,videoId:g},dataType:"json",success:function(i){}})}function b(){$.ajax({url:"/agency/getVideos.action",data:{projectId:projectId,uid:anchorUid,num:3},dataType:"json",success:function(h){if(!h||!h.data){$(".video-con").hide();return}if(h.data.list.length<=1){$(".video-con").hide()}$("#video_list").empty();$(".video-con").show();var g="";$.each(h.data.list,function(l,o){var k=o.url;var n=o.clicks||0;var i=o.thumb||"";var j=o.name||"";var p=o.id||"";var m='<li><div class="video-box"';m+=' style="background-image: url('+i+');">';m+='<div class="play-btn" data-href="'+k+'"';m+=' videoId="'+p+'"><i></i></div>';m+="</div><p>播放次数：<span>"+n+"</span></p></li>";g+=m});$("#video_list").append(g);$("#video_list li").hide();$("#video_list li").eq(0).show();c($(".video-box .play-btn"));e()}});$("#show_all_video").on("click",function(i){var j=$(this);var h=$(this).find("i");var g=j.siblings("#video-list");if(j.data("showall")!=1){$("#video_list li").show();_text="收起列表";h.css("-webkit-transform","scaleY(-1)");j.data("showall",1)}else{$("#video_list li").hide();$("#video_list li").eq(0).show();_text="更多视频";h.css("-webkit-transform","scaleY(1)");j.data("showall",0)}$("#switch_video_text").text(_text);return false})}if(queryInfo.from=="android"){$("#myVideoIdsection").append('<div class="video-loading"></div><div class="play-btn"><i></i></div>');$("#myVideoId").on("pause",function(){$("#myVideoIdsection .play-btn").show();$("#myVideoIdsection .video-loading").hide()}).on("error",function(){$("#myVideoIdsection .play-btn").show();$("#myVideoIdsection .video-loading").hide()}).on("ended",function(){$("#myVideoIdsection .play-btn").show();$("#myVideoIdsection .video-loading").hide()}).on("timeupdate",function(){if($("#myVideoId")[0].currentTime>d){$("#myVideoIdsection .video-loading").hide()}});$("#myVideoIdsection .play-btn").click(function(){d=$("#myVideoId")[0].currentTime;$("#myVideoIdsection .video-loading").show();$("#myVideoId")[0].play();$("#myVideoIdsection .play-btn").hide()})}$(function(){if(!$(".video-box .play-btn:eq(0)").attr("data-href")){$(".index-con .video-box .play-btn").hide();$(".video-con").hide()}else{e();b();c($(".video-box .play-btn"))}})});